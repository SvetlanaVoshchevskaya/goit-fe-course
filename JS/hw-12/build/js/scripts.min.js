"use strict";var template=document.querySelector("#js-card-template").innerHTML.trim(),input=document.querySelector(".link-input"),form=document.querySelector(".js-forms"),content=document.querySelector(".content"),arrayToStorage=localStorage.getItem("marks")?JSON.parse(localStorage.getItem("marks")):[],getValue=function(e){e.preventDefault();var t=input.value,r={id:Date.now(),content:t};0===arrayToStorage.length?saveToStorage(r):0<arrayToStorage.length&&resultCheck(t,r),input.value=""},resultCheck=function(e,t){checkElementInArr(arrayToStorage,e)?alert("bookmark already exist"):saveToStorage(t)},saveToStorage=function(e){arrayToStorage.push(e),createBookmark(e),localStorage.setItem("marks",JSON.stringify(arrayToStorage))},createBookmark=function(e){var t=Handlebars.compile(template)(e);content.insertAdjacentHTML("afterbegin",t)},checkElementInArr=function(e,t){return e.some(function(e){return e.content===t})},drawingFromStorage=function(){arrayToStorage?arrayToStorage.forEach(function(e){return createBookmark(e)}):localStorage.setItem("marks",JSON.stringify([]))},deleteBookmarks=function(){var e=event.target,t=e.parentNode.dataset.id;"BUTTON"===e.nodeName&&e.parentNode.remove();var r=arrayToStorage.filter(function(e){return e.id!==Number(t)});localStorage.setItem("marks",JSON.stringify(r))};window.addEventListener("DOMContentLoaded",drawingFromStorage),form.addEventListener("submit",getValue),content.addEventListener("click",deleteBookmarks);
"use strict";var template=document.querySelector("#js-card-template").innerHTML.trim(),input=document.querySelector(".link-input"),form=document.querySelector(".js-forms"),content=document.querySelector(".content"),arrayToStorage=JSON.parse(localStorage.getItem("marks"))||[];function getValue(){event.preventDefault();var e=input.value,t={id:Date.now(),content:e};if(0===arrayToStorage.length)saveToStorage(t);else if(0<arrayToStorage.length){if(checkElement(e))return void(input.value="");saveToStorage(t)}input.value=""}function saveToStorage(e){arrayToStorage.push(e),createForm(e),localStorage.setItem("marks",JSON.stringify(arrayToStorage))}function createForm(e){var t=Handlebars.compile(template)(e);content.insertAdjacentHTML("afterbegin",t)}function checkElement(t){return arrayToStorage.some(function(e){return e.content===t&&(alert("bookmark already exist"),!0)})}function painFromStorage(){if(arrayToStorage){var e=!0,t=!1,r=void 0;try{for(var a,o=arrayToStorage[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){createForm(a.value)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}else localStorage.setItem("marks",JSON.stringify([]))}function deleteBookmarks(e){var t=e.target,r=t.parentNode.dataset.id;"BUTTON"===t.nodeName&&t.parentNode.remove();var a=arrayToStorage.filter(function(e){return e.id!==Number(r)});localStorage.setItem("marks",JSON.stringify(a))}window.addEventListener("DOMContentLoaded",painFromStorage),form.addEventListener("submit",getValue),content.addEventListener("click",deleteBookmarks);